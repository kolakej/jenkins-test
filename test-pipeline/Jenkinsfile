pipeline {
    agent none
     tools {
        git 'Default' 
     }
     environment {
      version = "${params.version}"
       workspace = "${env.WORKSPACE}"
        artifact_path = "target/my-app-${version}-RELEASES.jar"
     }
     stages {
    stage('Build') 
      agent { label "test" }
          steps {
            dir("test-pipeline"){
            sh "mvn versions:set -DnewVersion=${version}-RELEASES"
            sh "mvn -Dmaven.test.failure.ignore clean package"
        }
      }
    }
}
